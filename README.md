# Poteridis
A project based on Cpp.
ΕΡΓΑΣΙΑ
 «Ο ΜΠΑΜΠΗΣ ΠΟΤΕΡΙΔΗΣ ΚΑΙ Η ΤΕΛΙΚΗ ΔΟΚΙΜΑΣΙΑ»
Η ιστορία...
Στο Μαγικό Εκπαιδευτικό Ίδρυμα (Μ.Ε.Ι.) Δυτικής Αττικής, στο οποίο φοιτούν μαθητευόμενοι μάγοι, προκειμένου οι τελειόφοιτοι μαθητές να πάρουν το πτυχίο τους, είναι υποχρεωμένοι να ολοκληρώσουν με επιτυχία μία δοκιμασία χωρίς χρήση μαγικών. Κλείνονται σε ένα σκοτεινό λαβύρινθο, άγνωστης σε αυτούς διάταξης, μέσα στον οποίο έχουν τοποθετηθεί σε τυχαίες θέσεις δέκα μαγικά πετράδια. Σκοπός της δοκιμασίας είναι να βρουν και τα δέκα πετράδια ώστε να εμφανιστεί η μαγική περγαμηνή η οποία, εκτός από πτυχίο, είναι και η μόνη έξοδος από το λαβύρινθο. Μόλις ο μαθητής πιάσει τη μαγική περγαμηνή μεταφέρεται έξω από τον λαβύρινθο και ανακηρύσσεται πτυχιούχος. Αν εγκαταλείψει την προσπάθεια θα πρέπει να επαναλάβει την τελευταία τάξη.
Για κακή τύχη του Μπάμπη Ποτερίδη, υπεύθυνος καθηγητής για την δοκιμασία ορίστηκε φέτος ο μοχθηρός Τζιμέλες. Ο Τζιμέλες, ο οποίος δεν συμπαθεί τον Μπάμπη Ποτερίδη, αποφάσισε να παρέμβει στην διεξαγωγή της δοκιμασίας τοποθετώντας στον λαβύρινθο δύο τέρατα: Ένα Καλικάντζαρο (Gnome) και το Αδηφάγο Σαχλομανικό Κτήνος του Τράαλ. Τα τέρατα κυνηγούν τον Μπάμπη και αν τον πιάσουν... Ευτυχώς για αυτόν η καλή καθηγήτρια ΜακΣγούρω αποφάσισε να τον βοηθήσει δίνοντας του κατευθυντήριες οδηγίες.
... και η άσκηση.
Αντικείμενο της εργασίας είναι να γραφτεί ένα πρόγραμμα το οποίο θα υλοποιεί το προηγούμενο παιχνίδι. Το πρόγραμμα θα σχηματίζει τον λαβύρινθο στην οθόνη, θα τοποθετεί τον Μπάμπη, τα δύο τέρατα, τα δέκα πετράδια και τη μαγική περγαμηνή σε τυχαίες αρχικές θέσεις και θα ανταποκρίνεται στις εντολές του χρήστη για την κίνηση του Μπάμπη. Η κατεύθυνση στην οποία θα κινούνται τα τέρατα θα αποφασίζεται από το πρόγραμμα με κλήση σχετικών μεθόδων.
Η υλοποίηση του προγράμματος θα πληροί όλες τις ακόλουθες προδιαγραφές:
Ο χάρτης του λαβύρινθου θα διαβάζεται από αρχείο, το όνομα του οποίου θα δίνεται ως όρισμα στη γραμμή εντολών. Το μέγεθος του χάρτη δεν είναι γνωστό. Στο αρχείο, ο χαρακτήρας “*” αντιστοιχεί σε τοίχο και ο χαρακτήρας “ ” αντιστοιχεί σε διάδρομο.
Τόσο οι αρχικές θέσεις του Μπάμπη και των τεράτων, όσο και των πετραδιών και της περγαμηνής επιλέγονται τυχαία από το πρόγραμμα. Τα αντικείμενα τοποθετούνται σε διάδρομο και κανένα από αυτά δεν τοποθετείται στην ίδια αρχική θέση με κάποιο άλλο. Η θέση της περγαμηνής κληρώνεται αφού ο Μπάμπης μαζέψει και τα δέκα πετράδια. Η περγαμηνή δεν μπορεί να τοποθετηθεί στις τρέχουσες θέσεις του Μπάμπη ή των τεράτων.
Η κίνηση του Μπάμπη ελέγχεται από τον παίκτη. Σε κάθε κίνηση, ο Μπάμπης κινείται κατά μία θέση πάνω, κάτω, αριστερά ή δεξιά (διαγώνιες κινήσεις δεν επιτρέπονται). Μπορεί επίσης να μείνει ακίνητος στη θέση που βρίσκεται. Ο έλεγχος του Μπάμπη γίνεται αποκλειστικά με τα “cursor keys” (για τις αντίστοιχες κινήσεις) και το πλήκτρο “Space” (για την ακινησία). Ο χρήστης, μπορεί να τερματίσει το παιχνίδι με τη χρήση του πλήκτρου “Escape”.
Η κίνηση των τεράτων επιλέγεται από το πρόγραμμα, σύμφωνα με τους κανόνες που ισχύουν και για τον Μπάμπη. Η επιλογή της κίνησής τους γίνεται με διαφορετικό αλγόριθμο και πρέπει να είναι όσο πιο... έξυπνη γίνεται.
Ο Μπάμπης και τα τέρατα, θεωρείται, ότι κινούνται ταυτόχρονα. Σε κάθε γύρο, το πρόγραμμα περιμένει τον παίκτη να επιλέξει την κατεύθυνση προς την οποία θα κινηθεί ο Μπάμπης, και στην συνέχεια επιλέγει κατεύθυνση κίνησης για τα τέρατα και στο τέλος τοποθετεί τους χαρακτήρες στη νέα τους θέση ώστε να δημιουργείται η αίσθηση της ταυτόχρονης κίνησης. Άκυροι πληκτρισμοί και εντολές κίνησης προς τοίχο αγνοούνται από το πρόγραμμα.
Το πρόγραμμα θα τηρεί έναν πίνακα με High Scores. Ο πίνακας θα έχει ακριβώς πέντε θέσεις. Σε κάθε θέση καταγράφεται το όνομα του παίκτη (μέχρι 10 γράμματα) και το score του (ακέραιος αριθμός). Ο πίνακας φυλάσσεται σε δυαδικό αρχείο το όνομα του οποίου δίνεται, επίσης, ως όρισμα στην γραμμή εντολών. Το score υπολογίζεται ως εξής: 10 βαθμοί για κάθε πετράδι και 100 βαθμοί για την περγαμηνή.
Το πρόγραμμα θα χειρίζεται το τερματικό με την χρήση ειδικής βιβλιοθήκης η οποία θα πληροί το λιγότερο τα εξής χαρακτηριστικά: Θα μπορεί να διαβάζει κάποιο χαρακτήρα χωρίς να πρέπει να πατηθεί το πλήκτρο “Enter”, θα μπορεί να καθαρίζει την οθόνη και θα μπορεί να τυπώσει χαρακτήρες σε συγκεκριμένες συντεταγμένες της οθόνης χωρίς να χρειάζεται να ξανασχεδιαστούν όλα τα περιεχόμενά της από την αρχή. Συστήνεται η χρήση της βιβλιοθήκης “NCurses”.
Ο χειρισμός των λαθών που πιθανόν να προκύψουν κατά το διάβασμα και το γράψιμο των αρχείων και κατά την επεξεργασία των παραμέτρων της γραμμής εντολών, θα υλοποιηθούν με τη χρήση εξαιρέσεων (exceptions).
Για την ανάπτυξη του προγράμματος θα υλοποιηθούν κατ' ελάχιστον οι ακόλουθες κλάσεις:
Engine. Είναι η κλάση η οποία υλοποιεί την μηχανή του παιχνιδιού. Είναι υπεύθυνη, μεταξύ άλλων, για το φόρτωμα και τον χειρισμό του χάρτη του λαβύρινθου, τον υπολογισμό του score, την αποστολή εντολής υπολογισμού νέας θέσης για τα κινητά αντικείμενα, τον έλεγχο συγκρούσεων, κ.λ.π.
Moving. Περιέχει τα κοινά χαρακτηριστικά και τις κοινές μεθόδους των αντικειμένων που... κινούνται.
Potter, Gnome, Traal. Οι κλάσεις που υλοποιούν τον Μπάμπη, τον Καλικάτζαρο και το Αδηφάγο Σαχλομανικό Κτήνος του Τράαλ αντίστοιχα. Θα κληρονομούν, υποχρεωτικά, την κλάση Moving. Η βασική λειτουργία τους είναι να αποφασίζουν την νέα θέση του αντικειμένου ή την κατεύθυνση προς την οποία θα κινηθεί.
HiScore. Χειρίζεται, συνολικά, τον πίνακα των High Scores. Κάθε φορά που τελειώνει ένα παιχνίδι στο αντικείμενο της κλάσης αυτής αποστέλλεται το score με τον εξής τρόπο: “X << Ν << S;” όπου Χ το αντικείμενο της κλάσης HiScore, N το όνομα του παίκτη και S το score του.
Κάθε υλοποίηση η οποία τηρεί στο ακέραιο τις παραπάνω προδιαγραφές, οι κλάσεις της έχουν σχεδιαστεί σωστά και ο κώδικάς είναι καλογραμμένος και ευανάγνωστος θα βαθμολογηθεί με 10. Έξτρα μονάδες (ακόμα και πέρα του 10) κερδίζουν οι ασκήσεις οι οποίες θα ενσωματώνουν μία ή περισσότερες από τις ακόλουθες επεκτάσεις / τροποποιήσεις:
Χρησιμοποιηθούν και άλλα χρώματα (πέρα από τα προεπιλεγμένα του τερματικού) για να απεικονιστούν τα διάφορα στοιχεία του παιχνιδιού.
Το παιχνίδι να παίζεται σε πραγματικό χρόνο και όχι σε γύρους. Σε αυτή τη περίπτωση ο Μπάμπης θα κινείται μόνο όταν ο χρήστης πατάει κάποιο από τα πλήκτρα κατεύθυνσης και θα μένει ακίνητος όταν δεν πατιέται κάποιο από αυτά. Τα τέρατα κινούνται συνέχεια και η χρήση του πλήκτρου space καταργείται.
Κάθε φορά που τελειώνει ένας γύρος, δηλαδή όταν ο Μπάμπης βρεθεί στην ίδια θέση με την περγαμηνή, θα ξεκινάει ένας νέος γύρος, ο οποίος θα απαιτεί να βρεθούν περισσότερα πετράδια, ή θα έχει περισσότερα τέρατα (αλλά όχι άλλου τύπου) ή θα χρησιμοποιεί άλλο χάρτη.
Τα τέρατα να είναι πραγματικά “έξυπνα”. Για παράδειγμα κάποιο από αυτά, σε κάθε γύρο, μπορεί να βρίσκει τη συντομότερη διαδρομή για την τρέχουσα θέση του Μπάμπη και να κινείται προς την κατεύθυνση αυτή ή τα τέρατα θα συνεργάζονται για να περικυκλώσουν τον Μπάμπη.
Ο Μπάμπης να μην ελέγχεται από το πληκτρολόγιο αλλά να αποφασίζει μόνος του τη διαδρομή που θα πρέπει να ακολουθήσει. Στην περίπτωση αυτή οι κινήσεις του πρέπει να είναι τέτοιες που να οδηγούν στην σύντομη ολοκλήρωση του παιχνιδιού.
Στο τέλος του παιχνιδιού να δημιουργείται κάποιο ειδικό εφέ ανάλογα με το αν ο παίκτης κέρδισε ή έχασε.
